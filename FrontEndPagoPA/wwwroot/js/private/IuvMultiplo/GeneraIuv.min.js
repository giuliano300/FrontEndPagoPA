function GetOperationType(n){$(".operationType").empty();$(".operationType").append('<option value="">Seleziona un tipo<\/option>');$.get("/Action/GetOperationTypes",function(t){let i=JSON.parse(t);$.get("/User/GetOperationTypeSenderUser/"+n,function(n){let r=JSON.parse(n).map(n=>n.operationTypeId);for(var t=0;t<i.Result.length;t++)r.indexOf(i.Result[t].id)>=0&&$(".operationType").append('<option value="'+i.Result[t].id+'">'+i.Result[t].typeName+"<\/option>")})})}function CheckOperationType(){var n=$(".operationType").val();n=="3"?($("#rate-select").prop("disabled",!0),$("#rate-list").empty()):$("#rate-select").prop("disabled",!1)}function GetUsers(){$.get("/User/GetUsers",function(n){for(var i=JSON.parse(n),t=0;t<i.length;t++)$(".user").append('<option value="'+i[t].id+'">'+i[t].businessName+"<\/option>")})}function GetPreload(){$(".preload").show()}Dropzone.options.dropzoneForm={url:"/Action/UploadFileCsv?bollettino=0",paramName:"file",maxFilesize:50,maxFiles:1,chunking:!0,acceptedFiles:".csv",dictDefaultMessage:"<i class='fas fa-file-upload'><\/i><br>Trascina un file oppure clicca per effettuare l'upload",init:function(){this.on("maxfilesexceeded",function(n){var t=eval("("+n.xhr.responseText+")")});this.on("addedfile",function(){});this.on("processing",function(){$(".progress-bar").css("width","0%");$(".progress-bar").text("0%")});this.on("complete",function(n){this.removeFile(n)});this.on("uploadprogress",function(n,t){$(".progress-bar").css("width",parseInt(t)+"%");$(".progress-bar").text(parseInt(t)+"%");t===100&&$(".preload-file").html('<i class="fas fa-file-upload"><\/i><br>Trascina un file oppure clicca per effettuare l\'upload')})},success:function(n,t){var i,r;if($(".btn-submit").removeAttr("disabled"),$(".csv-list").hide(),$(".csv-list-body").empty(),i=jQuery.parseJSON(t),i.length==0)$(".modal-title").html("Attenzione"),$(".modal-body").html("Attenzione si è verificato un problema nel caricamento del csv. Il nome delle colonne non risulta corretto. Modificare le colonne e ricaricare il file."),$("#exampleModal").modal("show");else{for(i.filter(n=>n.valid==!0).length==0&&($(".modal-title").html("Attenzione"),$(".modal-body").html("Attenzione si è verificato un problema con tutti i dati presenti nel csv. Controllare il file e ricaricarlo una volta corretto."),$("#exampleModal").modal("show"),$(".btn-submit").attr("disabled","disabled")),r=0;r<i.length;r++){let n="",t="OK";i[r].valid||(n=" class='error-csv'",t="KO");let u="<ul "+n+"><li>"+i[r].nominativo+"<\/li><li>"+i[r].codicefiscale+" <\/li><li>€"+i[r].totale+"<\/li><li class='text-center'>"+i[r].numeroRatei+"<\/li><li><strong>"+t+"<\/strong><\/li><li>"+i[r].message+"<\/li><\/ul>";$(".csv-list-body").append(u)}$(".csv-list").show();$(".lista").val(!0)}}};$(function(){GetUsers()});$(".frm").on("submit",function(){if($(".lista").val()!="true")return $(".modal-title").html("Attenzione"),$(".modal-body").html("Prima di procedere caricare una lista csv"),$("#exampleModal").modal("show"),!1});