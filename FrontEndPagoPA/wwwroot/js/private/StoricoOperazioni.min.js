function FiltraRichieste(){let n={dataInizio:$("#dataInizio").val(),dataFine:$("#dataFine").val(),page:1,itemsPerPage:itemsPerPage};$.post("/Action/FiltraRichiesteStoricoOperazioni",n,function(n){let t=$.parseJSON(n);GetRichieste(t.Result);CreatePaginations(t.Message)})}function GetRichiestePerPage(n,t){$.get("/Action/GetStoricoOperazioni?page="+n+"&itemsPerPage="+itemsPerPage,function(n){var i=$.parseJSON(n);GetRichieste(i.Result);t&&CreatePaginations(i.Message)})}function CreatePaginations(n){if($(".pagination").empty(),n>0){let i="<a onclick='GetRichiestePerPage(1)'><i class='las la-angle-left'><\/i><\/a>",r=Math.ceil(n/itemsPerPage);for(var t=0;t<r;t++)i+="<a onclick='GetRichiestePerPage("+(t+1)+")'>"+(t+1)+"<\/a>";i+="<a onclick='GetRichiestePerPage("+r+")'><i class='las la-angle-right'><\/i><\/a>";$(".pagination").append(i)}}function EliminaFiltro(){let n=$("#dataInizio"),t=$("#dataFine");$.get("/Action/EliminaFiltroStoricoOperazioni",function(i){var r=$.parseJSON(i);n.val("@today");t.val("");GetRichiestePerPage(1,!0)})}function GetRichieste(n){var t,i;if($(".operations-history").empty(),n!=null)if(n.length>0)for(t=0;t<n.length;t++){let r=new Date(n[t].date),u=r.toLocaleDateString("it-IT",{year:"numeric",month:"2-digit",day:"2-digit"});i="<ul><li>"+n[t].title+"<\/li><li class='text-center'>"+u+"<\/li><li class='text-center'>"+n[t].operationType+"<\/li>";i+=n[t].bollettino==!1||n[t].bollettino==""||n[t].bollettino==null?"<li class='text-center'>IUV<\/li>":"<li class='text-center'>IUV + Bollettino<\/li>";i+="<li class='text-center'><div class='progress-bar'><div style='width:100%; position:absolute; z-index:200; text-align:center; color:#FFF; font-weight:600;'>"+n[t].workedInstallmentsPercentage+"%<\/div><span style='width:"+n[t].workedInstallmentsPercentage+"%'><\/span><\/div><\/li>";n[t].workedInstallmentsPercentage==100?(i+="<li class='text-center' title='documento disponibile' onclick='GetCsv("+n[t].operationId+")'><i class='bx bx-qr active-btn'><\/i><\/li>",i+=n[t].bollettino==!1||n[t].bollettino==""||n[t].bollettino==null?"<li class='text-center' title='nessuna azione possibile'>-<\/li>":n[t].downloadableFile?"<li class='text-center' title='documento disponibile' onclick='GetZipFile("+n[t].operationId+")'><i class='las la-file-archive active-btn'><\/i><\/li>":"<li class='text-center' title='documento non ancora disponibile'><i class='las la-file-archive not-active'><\/i><\/li>"):(i+="<li class='text-center' title='documento non ancora disponibile'><i class='bx bx-qr not-active'><\/i><\/li>",i+=n[t].bollettino==!1||n[t].bollettino==""||n[t].bollettino==null?"<li class='text-center' title='nessuna azione possibile'>-<\/li>":"<li class='text-center' title='documento non ancora disponibile'><i class='las la-file-archive not-active'><\/i><\/li>");i+="<\/ul>";$(".operations-history").append(i)}else $(".operations-history").append("<ul><li style='width:100%; text-align: center; padding:10px'> Nessuna richiesta trovata <\/li><\/ul>");else $(".operations-history").append("<ul><li style='width:100%; text-align: center; padding:10px'> Nessuna richiesta trovata <\/li><\/ul>")}function GetCsv(n){$.get("/Action/GetCsvFromOperation?id="+n,function(n){window.open(n)})}function GetZipFile(n){$.get("/Action/GetFileFromOperation?id="+n,function(n){window.open(n)})}let itemsPerPage=100;$(function(){GetRichiestePerPage(1,!0)});