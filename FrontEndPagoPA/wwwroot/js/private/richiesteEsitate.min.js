function DownloadList(){$(".preload").show();let t={dataInizio:$("#dataInizio").val(),dataFine:$("#dataFine").val(),codiceFiscale:$("#codiceFiscale").val(),iuv:$("#iuv").val(),importoMin:$("#importoMinimo").val(),importoMax:$("#importoMassimo").val(),worked:!0,page:1,valid:null,itemsPerPage:1e8,type:"RichiesteEsitate"};const n=document.createElement("iframe");n.style.display="none";document.body.appendChild(n);$.post("/Action/GetIuvInCsv",t,function(t){n.src=t}).done(function(){$(".preload").hide()})}function FiltraRichieste(){$(".preload").show();let n={dataInizio:$("#dataInizio").val(),dataFine:$("#dataFine").val(),codiceFiscale:$("#codiceFiscale").val(),iuv:$("#iuv").val(),importoMin:$("#importoMinimo").val(),importoMax:$("#importoMassimo").val(),worked:!0,page:1,valid:null,itemsPerPage:itemsPerPage};$.post("/Action/FiltraRichieste",n,function(t){let i=JSON.parse(t);GetRichieste(i.Result);CreatePaginations(n.codiceFiscale,n.iuv,n.dataInizio,n.dataFine,n.importoMin,n.importoMax,!0)})}function GetRichiestePerPage(n,t){let i=$("#codiceFiscale").val(),r=$("#iuv").val(),u=$("#dataInizio").val(),f=$("#dataFine").val(),e=$("#importoMinimo").val(),o=$("#importoMassimo").val();$(".items").removeClass("selected");$(".item-"+n).addClass("selected");$.get("/Action/GetRichiesteEsitate?page="+n+"&itemsPerPage="+itemsPerPage+"&codiceFiscale="+i+"&iuv="+r+"&dataInizio="+u+"&dataFine="+f+"&importoMin="+e+"&importoMax="+o,function(n){var s=JSON.parse(n);GetRichieste(s.Result);t&&CreatePaginations(i,r,u,f,e,o,t);$(".preload").hide()})}function CreatePaginations(n,t,i,r,u,f,e){$.get("/Action/GetRichiesteEsitate?page=1&itemsPerPage=1000000000&codiceFiscale="+n+"&iuv="+t+"&dataInizio="+i+"&dataFine="+r+"&importoMin="+u+"&importoMax="+f,function(n){var r=JSON.parse(n),i=r.Message,t;if($(".pagination").empty(),i>0){let n="<a onclick='GetRichiestePerPage(1)'><i class='las la-angle-left'><\/i><\/a>",r=Math.ceil(i/itemsPerPage);for(t=0;t<r;t++)n+="<a onclick='GetRichiestePerPage("+(t+1)+")' class='items item-"+(t+1)+"'>"+(t+1)+"<\/a>";n+="<a onclick='GetRichiestePerPage("+r+")'><i class='las la-angle-right'><\/i><\/a>";n+=i==1?"<span>  1 Risultato <\/span>":"<span>  "+i+" Risultati<\/span>";$(".pagination").append(n);e&&($(".items").removeClass("selected"),$(".item-1").addClass("selected"))}})}function EliminaFiltro(){$(".preload").show();let n=$("#dataInizio"),t=$("#dataFine"),i=$("#codiceFiscale"),r=$("#iuv"),u=$("#importoMinimo"),f=$("#importoMassimo");$.get("/Action/EliminaFiltroRichiesteEsitate",function(e){var o=JSON.parse(e);n.val(today);t.val("");i.val("");r.val("");u.val("");f.val("");GetRichiestePerPage(1,!0)})}function GetRichieste(n){var t,i;if($(".archive-list-accepted").empty(),n!=null)if(n.length>0)for(t=0;t<n.length;t++){let r="Rata unica",f=new Date(n[t].expirationDate),e=f.toLocaleDateString("it-IT",{year:"numeric",month:"2-digit",day:"2-digit"}),u=CheckOperationTypeId(n[t].operationTypeId);n[t].numeroRata!=0&&(r=n[t].numeroRata);i="<ul><li>"+n[t].id+"<\/li><li>"+n[t].codiceIdentificativoUnivocoPagatore+"<\/li><li>"+n[t].iuv+"<\/li><li>"+u+"<\/li><li>"+n[t].price+"â‚¬<\/li>";i+=u=="Multa"?"<li>"+n[t].description+"<\/li>":"<li>"+r+"<\/li>";i+="<li>"+e+"<\/li>";i+=n[t].valid!=!0?"<li><strong style='color:#EA5555;'><i class='las la-times'><\/i>&nbsp;NON VALIDATA<\/strong><\/li>":"<li><strong><i class='las la-check'><\/i>&nbsp;ESITATA<\/strong><\/li>";i+="<\/ul>";$(".archive-list-accepted").append(i)}else $(".archive-list-accepted").append("<ul><li style='width:100%; text-align: center; padding:10px'> Nessuna richiesta trovata <\/li><\/ul>");else $(".archive-list-accepted").append("<ul><li style='width:100%; text-align: center; padding:10px'> Nessuna richiesta trovata <\/li><\/ul>");$(".preload").hide()}function CheckOperationTypeId(n){return n===OperationType.TARI?"Tari":n===OperationType.MENSA?"Mensa scolastica":n===OperationType.MULTE?"Multa":n===OperationType.CANONE?"Canone unico":n===OperationType.PASSOCARRABILE?"Passo carrabile":n===OperationType.TRASPORTO?"Trasporto scolastico":""}let itemsPerPage=100,currentDate=new Date,today=currentDate.toISOString().split("T")[0];const OperationType={TARI:1,MENSA:2,MULTE:3,CANONE:4,PASSOCARRABILE:5,TRASPORTO:6};$(function(){$(".preload").show();GetRichiestePerPage(1,!0)});